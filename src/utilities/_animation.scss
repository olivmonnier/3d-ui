$rotations: "x", "y", "z";

@each $rotation in $rotations {
  $upper: to-upper-case($rotation);
  $rule: 
    translateX(-50%)
    translateY(-50%)
    translateX(var(--pos-x))
    translateY(var(--pos-y))
    translateZ(var(--pos-z));

  .rotating-#{$rotation} {
    @include animation(rotating#{$upper}, 3s);
  }

  @include keyframe(rotating#{$upper}) {
    from {
      @if ($rotation == "x") {
        transform: $rule + rotateX(0deg)
          rotateY(var(--rot-y))
          rotateZ(var(--rot-z));
      } @else if ($rotation == "y") {
        transform: $rule + rotateY(0deg)
          rotateX(var(--rot-x))
          rotateZ(var(--rot-z));
      } @else if ($rotation == "z") {
        transform: $rule + rotateZ(0deg)
          rotateX(var(--rot-x))
          rotateY(var(--rot-y));
      }
    }
    to {
      @if ($rotation == "x") {
        transform: $rule + rotateX(360deg)
          rotateY(var(--rot-y))
          rotateZ(var(--rot-z));
      } @else if ($rotation == "y") {
        transform: $rule + rotateY(360deg)
          rotateX(var(--rot-x))
          rotateZ(var(--rot-z));
      } @else if ($rotation == "z") {
        transform: $rule + rotateZ(360deg)
          rotateX(var(--rot-x))
          rotateY(var(--rot-y));
      }
    }
  }
}